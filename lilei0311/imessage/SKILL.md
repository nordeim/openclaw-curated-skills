# iMessage Skill

## ç®€ä»‹

iMessage Skill è®© OpenClaw èƒ½å¤Ÿé€šè¿‡ macOS çš„ Messages åº”ç”¨å‘é€å’Œæ¥æ”¶ iMessage æ¶ˆæ¯ã€‚

**å®‰å…¨å¢å¼ºç‰ˆç‰¹æ€§**ï¼š
- âœ… å¯ä¿¡è”ç³»äººåå•
- âœ… å‘é€å‰ç¡®è®¤æœºåˆ¶
- âœ… æ¯æ—¥å‘é€é™åˆ¶
- âœ… å®‰å…¨äº‹ä»¶æ—¥å¿—
- âœ… **æ¥æ”¶æ¶ˆæ¯æ§åˆ¶ OpenClaw**ï¼ˆè¿œç¨‹æ§åˆ¶ï¼‰

## âš ï¸ å®‰å…¨è­¦å‘Š

**é‡è¦æç¤º**ï¼š
- æœ¬ Skill å¯ä»¥å‘é€çŸ­ä¿¡/iMessageï¼Œè¯·è°¨æ…ä½¿ç”¨
- é¦–æ¬¡ä½¿ç”¨éœ€è¦é…ç½®å¯ä¿¡è”ç³»äººåå•
- å‘éå¯ä¿¡è”ç³»äººå‘é€æ¶ˆæ¯éœ€è¦æ‰‹åŠ¨ç¡®è®¤
- **è¿œç¨‹æ§åˆ¶åŠŸèƒ½é»˜è®¤å…³é—­**ï¼Œéœ€è¦æ‰‹åŠ¨å¯ç”¨å¹¶é…ç½®ç®¡ç†å‘˜
- å»ºè®®ä»…å°†å¸¸ç”¨è”ç³»äººæ·»åŠ åˆ°å¯ä¿¡åå•
- æ‰€æœ‰å‘é€æ“ä½œéƒ½ä¼šè¢«è®°å½•åˆ°å®‰å…¨æ—¥å¿—

## ç³»ç»Ÿè¦æ±‚

- **ä»…æ”¯æŒ macOS** - éœ€è¦ macOS 10.14 æˆ–æ›´é«˜ç‰ˆæœ¬
- **éœ€è¦ Messages åº”ç”¨** - ç³»ç»Ÿè‡ªå¸¦çš„ Messages åº”ç”¨å¿…é¡»å¯ç”¨
- **éœ€è¦è¾…åŠ©åŠŸèƒ½æƒé™** - é¦–æ¬¡ä½¿ç”¨éœ€è¦æˆäºˆç»ˆç«¯/è„šæœ¬ç¼–è¾‘å™¨è¾…åŠ©åŠŸèƒ½æƒé™
- **iMessage å·²ç™»å½•** - éœ€è¦åœ¨ Messages åº”ç”¨ä¸­ç™»å½• Apple ID

## åŠŸèƒ½ç‰¹æ€§

### æ¶ˆæ¯å‘é€
- ğŸ’¬ **å‘é€æ–‡æœ¬æ¶ˆæ¯** - å‘æŒ‡å®šæ‰‹æœºå·æˆ–é‚®ç®±å‘é€ iMessage
- ğŸ–¼ï¸ **å‘é€å›¾ç‰‡** - å‘é€å›¾ç‰‡æ–‡ä»¶ç»™è”ç³»äºº

### æ¶ˆæ¯æ¥æ”¶
- ğŸ“¨ **æŸ¥çœ‹æœ€è¿‘æ¶ˆæ¯** - è·å–æœ€è¿‘çš„èŠå¤©è®°å½•
- ğŸ‘¥ **è”ç³»äººåˆ—è¡¨** - æŸ¥çœ‹æœ€è¿‘çš„è”ç³»äºº

### è¿œç¨‹æ§åˆ¶ï¼ˆæ–°åŠŸèƒ½ï¼‰
- ğŸ“± **æ¥æ”¶æ§åˆ¶å‘½ä»¤** - é€šè¿‡ iMessage æ§åˆ¶ OpenClaw
- ğŸ” **ç®¡ç†å‘˜æƒé™** - åªæœ‰ç®¡ç†å‘˜å¯ä»¥æ‰§è¡Œæ§åˆ¶å‘½ä»¤
- ğŸ›¡ï¸ **å‘½ä»¤ç™½åå•** - åªå…è®¸æ‰§è¡ŒæŒ‡å®šå‘½ä»¤
- ğŸš« **å‘½ä»¤é»‘åå•** - ç¦æ­¢æ‰§è¡Œå±é™©å‘½ä»¤

### å®‰å…¨ç®¡ç†
- ğŸ”’ **å¯ä¿¡åå•** - ç®¡ç†å¯ä¿¡è”ç³»äººï¼Œå…ç¡®è®¤å‘é€
- âœ… **å‘é€ç¡®è®¤** - å‘éå¯ä¿¡è”ç³»äººå‘é€å‰éœ€è¦ç¡®è®¤
- ğŸ“Š **å‘é€é™åˆ¶** - æ¯æ—¥æœ€å¤šå‘é€ 100 æ¡æ¶ˆæ¯
- ğŸ“ **å®‰å…¨æ—¥å¿—** - è®°å½•æ‰€æœ‰å‘é€æ“ä½œåˆ° security.log
- ğŸ“‹ **æ§åˆ¶æ—¥å¿—** - è®°å½•æ‰€æœ‰æ§åˆ¶å‘½ä»¤åˆ° control.log

## å®‰è£…

### 1. å®‰è£… Skill

```bash
npx clawhub install imessage
```

### 2. æˆäºˆæƒé™

é¦–æ¬¡ä½¿ç”¨æ—¶ï¼Œç³»ç»Ÿä¼šæç¤ºæˆäºˆè¾…åŠ©åŠŸèƒ½æƒé™ï¼š

1. æ‰“å¼€ **ç³»ç»Ÿè®¾ç½®** â†’ **éšç§ä¸å®‰å…¨æ€§** â†’ **è¾…åŠ©åŠŸèƒ½**
2. æ·»åŠ å¹¶å¯ç”¨ **ç»ˆç«¯**ï¼ˆæˆ–ä½ ä½¿ç”¨çš„è„šæœ¬ç¼–è¾‘å™¨ï¼‰
3. ç¡®ä¿ **Messages** åº”ç”¨ä¹Ÿåœ¨åˆ—è¡¨ä¸­

### 3. ç¡®ä¿ iMessage å·²ç™»å½•

æ‰“å¼€ Messages åº”ç”¨ï¼Œç¡®è®¤å·²ç™»å½•ä½ çš„ Apple IDã€‚

## ä½¿ç”¨æ–¹æ³•

### å¯ä¿¡è”ç³»äººç®¡ç†

```bash
# æ·»åŠ å¯ä¿¡è”ç³»äººï¼ˆå…ç¡®è®¤å‘é€ï¼‰
python3 ~/.openclaw/workspace/skills/imessage/scripts/main.py trust phone=+8613800138000

# ç§»é™¤å¯ä¿¡è”ç³»äºº
python3 ~/.openclaw/workspace/skills/imessage/scripts/main.py untrust phone=+8613800138000

# æŸ¥çœ‹æ‰€æœ‰å¯ä¿¡è”ç³»äºº
python3 ~/.openclaw/workspace/skills/imessage/scripts/main.py list_trusted
```

### ç®¡ç†å‘˜ç®¡ç†

```bash
# æ·»åŠ ç®¡ç†å‘˜ï¼ˆå¯è¿œç¨‹æ§åˆ¶ OpenClawï¼‰
python3 ~/.openclaw/workspace/skills/imessage/scripts/main.py admin phone=+8613800138000

# ç§»é™¤ç®¡ç†å‘˜
python3 ~/.openclaw/workspace/skills/imessage/scripts/main.py unadmin phone=+8613800138000
```

### è¿œç¨‹æ§åˆ¶ç®¡ç†

```bash
# å¯ç”¨è¿œç¨‹æ§åˆ¶
python3 ~/.openclaw/workspace/skills/imessage/scripts/main.py enable_control

# ç¦ç”¨è¿œç¨‹æ§åˆ¶
python3 ~/.openclaw/workspace/skills/imessage/scripts/main.py disable_control
```

### å‘é€æ–‡æœ¬æ¶ˆæ¯

```bash
# å‘é€ç»™å¯ä¿¡è”ç³»äººï¼ˆæ— éœ€ç¡®è®¤ï¼‰
python3 ~/.openclaw/workspace/skills/imessage/scripts/main.py send phone=+8613800138000 message="ä½ å¥½"

# å‘é€ç»™éå¯ä¿¡è”ç³»äººï¼ˆéœ€è¦ç¡®è®¤ï¼‰
python3 ~/.openclaw/workspace/skills/imessage/scripts/main.py send phone=+8613900139000 message="æµ‹è¯•æ¶ˆæ¯"
# ç³»ç»Ÿä¼šæç¤ºï¼šæ˜¯å¦ç»§ç»­å‘é€? (yes/no):
```

### å‘é€å›¾ç‰‡

```bash
# å‘é€å›¾ç‰‡ï¼ˆåŒæ ·éœ€è¦å®‰å…¨æ£€æŸ¥ï¼‰
python3 ~/.openclaw/workspace/skills/imessage/scripts/main.py send_image phone=+8613800138000 image=/Users/username/Pictures/photo.jpg
```

### æŸ¥çœ‹æœ€è¿‘æ¶ˆæ¯

```bash
# æŸ¥çœ‹æ‰€æœ‰æœ€è¿‘æ¶ˆæ¯
python3 ~/.openclaw/workspace/skills/imessage/scripts/main.py recent limit=10

# æŸ¥çœ‹ç‰¹å®šè”ç³»äººçš„æ¶ˆæ¯
python3 ~/.openclaw/workspace/skills/imessage/scripts/main.py recent phone=+8613800138000 limit=5

# æ£€æŸ¥å¹¶æ‰§è¡Œæ§åˆ¶å‘½ä»¤
python3 ~/.openclaw/workspace/skills/imessage/scripts/main.py recent check_control=true
```

### æŸ¥çœ‹è”ç³»äººåˆ—è¡¨

```bash
# è·å–æœ€è¿‘è”ç³»äººï¼ˆæ˜¾ç¤ºå¯ä¿¡å’Œç®¡ç†å‘˜çŠ¶æ€ï¼‰
python3 ~/.openclaw/workspace/skills/imessage/scripts/main.py contacts limit=20
```

## è¿œç¨‹æ§åˆ¶åŠŸèƒ½

### å·¥ä½œåŸç†

1. **å‘é€æ§åˆ¶å‘½ä»¤**ï¼šç®¡ç†å‘˜å‘é€ä»¥ `!` å¼€å¤´çš„æ¶ˆæ¯
2. **Skill æ£€æµ‹å‘½ä»¤**ï¼šåœ¨è·å–æ¶ˆæ¯æ—¶è‡ªåŠ¨æ£€æµ‹æ§åˆ¶å‘½ä»¤
3. **æƒé™éªŒè¯**ï¼šæ£€æŸ¥å‘é€è€…æ˜¯å¦æ˜¯ç®¡ç†å‘˜
4. **æ‰§è¡Œå‘½ä»¤**ï¼šæ‰§è¡Œå…è®¸çš„å‘½ä»¤å¹¶å›å¤ç»“æœ

### å¯ç”¨å‘½ä»¤

ç®¡ç†å‘˜å¯ä»¥é€šè¿‡ iMessage å‘é€ä»¥ä¸‹å‘½ä»¤ï¼š

```
!status - æŸ¥çœ‹ OpenClaw çŠ¶æ€
!help - æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
!list - åˆ—å‡ºå·²å®‰è£…çš„ Skills
!info - æ˜¾ç¤ºç³»ç»Ÿä¿¡æ¯
!echo <æ¶ˆæ¯> - å›æ˜¾æ¶ˆæ¯
```

### ä½¿ç”¨ç¤ºä¾‹

1. **ç®¡ç†å‘˜å‘é€å‘½ä»¤**ï¼š
   ```
   !status
   ```

2. **Skill è‡ªåŠ¨å›å¤**ï¼š
   ```
   OpenClaw çŠ¶æ€
   [OpenClaw çŠ¶æ€è¾“å‡º]
   ```

### å®‰å…¨æœºåˆ¶

- **é»˜è®¤ç¦ç”¨**ï¼šè¿œç¨‹æ§åˆ¶åŠŸèƒ½é»˜è®¤å…³é—­
- **ç®¡ç†å‘˜æƒé™**ï¼šåªæœ‰ admin_contacts ä¸­çš„è”ç³»äººå¯ä»¥æ‰§è¡Œå‘½ä»¤
- **å‘½ä»¤ç™½åå•**ï¼šåªå…è®¸æ‰§è¡Œ allowed_commands ä¸­çš„å‘½ä»¤
- **å‘½ä»¤é»‘åå•**ï¼šç¦æ­¢æ‰§è¡Œ blocked_commands ä¸­çš„å‘½ä»¤ï¼ˆå¦‚ deleteã€rm ç­‰ï¼‰
- **å‘½ä»¤å‰ç¼€**ï¼šå¿…é¡»ä»¥ `!` å¼€å¤´æ‰è¯†åˆ«ä¸ºæ§åˆ¶å‘½ä»¤

## å®‰å…¨é…ç½®

ç¼–è¾‘ `~/.openclaw/workspace/skills/imessage/config.json`ï¼š

```json
{
  "trusted_contacts": [
    "+8613800138000"
  ],
  "admin_contacts": [
    "+8613800138000"
  ],
  "require_confirmation": true,
  "max_daily_messages": 100,
  "enable_logging": true,
  "enable_remote_control": false,
  "allowed_commands": ["status", "help", "list", "info", "echo"],
  "blocked_commands": ["delete", "rm", "remove", "uninstall", "exec", "eval"],
  "command_prefix": "!"
}
```

### é…ç½®è¯´æ˜

| é…ç½®é¡¹ | è¯´æ˜ | é»˜è®¤å€¼ |
|--------|------|--------|
| `trusted_contacts` | å¯ä¿¡è”ç³»äººåˆ—è¡¨ | [] |
| `admin_contacts` | ç®¡ç†å‘˜åˆ—è¡¨ï¼ˆå¯è¿œç¨‹æ§åˆ¶ï¼‰ | [] |
| `require_confirmation` | æ˜¯å¦éœ€è¦å‘é€ç¡®è®¤ | true |
| `max_daily_messages` | æ¯æ—¥æœ€å¤§å‘é€æ•° | 100 |
| `enable_logging` | æ˜¯å¦å¯ç”¨å®‰å…¨æ—¥å¿— | true |
| `enable_remote_control` | æ˜¯å¦å¯ç”¨è¿œç¨‹æ§åˆ¶ | false |
| `allowed_commands` | å…è®¸çš„å‘½ä»¤åˆ—è¡¨ | ["status", "help", "list", "info", "echo"] |
| `blocked_commands` | ç¦æ­¢çš„å‘½ä»¤åˆ—è¡¨ | ["delete", "rm", "remove", "uninstall"] |
| `command_prefix` | å‘½ä»¤å‰ç¼€ | "!" |

## å®‰å…¨æœºåˆ¶è¯´æ˜

### å¯ä¿¡åå•æœºåˆ¶

1. **å¯ä¿¡è”ç³»äºº**ï¼šæ·»åŠ åˆ° `trusted_contacts` çš„è”ç³»äººï¼Œå‘é€æ¶ˆæ¯æ—¶æ— éœ€ç¡®è®¤
2. **éå¯ä¿¡è”ç³»äºº**ï¼šä¸åœ¨åå•ä¸­çš„è”ç³»äººï¼Œå‘é€å‰éœ€è¦æ‰‹åŠ¨ç¡®è®¤
3. **è‡ªåŠ¨æ‹’ç»**ï¼šéäº¤äº’å¼ç¯å¢ƒï¼ˆå¦‚è„šæœ¬ï¼‰æ— æ³•å‘éå¯ä¿¡è”ç³»äººå‘é€

### å‘é€ç¡®è®¤æµç¨‹

```
å‘é€è¯·æ±‚ â†’ æ£€æŸ¥å¯ä¿¡åå• â†’ æ˜¯ â†’ ç›´æ¥å‘é€
                â†“ å¦
         äº¤äº’å¼ç¯å¢ƒ? â†’ æ˜¯ â†’ æç¤ºç¡®è®¤ â†’ ç”¨æˆ·ç¡®è®¤ â†’ å‘é€
                â†“ å¦
              æ‹’ç»å‘é€
```

### è¿œç¨‹æ§åˆ¶å®‰å…¨æµç¨‹

```
æ¥æ”¶æ¶ˆæ¯ â†’ æ£€æµ‹å‘½ä»¤å‰ç¼€ â†’ æ˜¯ â†’ æ£€æŸ¥è¿œç¨‹æ§åˆ¶å¯ç”¨
                              â†“ å¦
                         æ£€æŸ¥ç®¡ç†å‘˜æƒé™
                              â†“ å¦
                         æ£€æŸ¥å‘½ä»¤é»‘åå•
                              â†“ æ˜¯
                         æ£€æŸ¥å‘½ä»¤ç™½åå•
                              â†“ å¦
                         æ‰§è¡Œå‘½ä»¤ â†’ å‘é€å›å¤
```

### å®‰å…¨æ—¥å¿—

æ‰€æœ‰æ“ä½œè®°å½•åœ¨ `security.log`ï¼š

```json
{"timestamp": "2026-02-16 10:30:00", "user": "username", "event": "SEND_MESSAGE", "details": {"phone": "+8613800138000", "trusted": true}}
{"timestamp": "2026-02-16 10:35:00", "user": "username", "event": "ADD_ADMIN_CONTACT", "details": {"phone": "+8613800138000"}}
{"timestamp": "2026-02-16 10:40:00", "user": "username", "event": "REMOTE_CONTROL_ENABLED", "details": {}}
```

æ§åˆ¶å‘½ä»¤è®°å½•åœ¨ `control.log`ï¼š

```json
{"timestamp": "2026-02-16 10:45:00", "event": "CONTROL_COMMAND_EXECUTED", "details": {"phone": "+8613800138000", "command": "status", "success": true}}
```

## æ•…éšœæ’é™¤

### "ä¸åœ¨å¯ä¿¡åå•ä¸­ï¼Œæ— æ³•è‡ªåŠ¨å‘é€"
- ä½¿ç”¨ `trust` å‘½ä»¤å°†è”ç³»äººæ·»åŠ åˆ°å¯ä¿¡åå•
- æˆ–åœ¨äº¤äº’å¼ç¯å¢ƒä¸­æ‰‹åŠ¨ç¡®è®¤å‘é€

### "æ‚¨æ²¡æœ‰æƒé™æ§åˆ¶ OpenClaw"
- è¯¥è”ç³»äººä¸åœ¨ `admin_contacts` åˆ—è¡¨ä¸­
- ä½¿ç”¨ `admin` å‘½ä»¤æ·»åŠ ç®¡ç†å‘˜

### "è¿œç¨‹æ§åˆ¶åŠŸèƒ½æœªå¯ç”¨"
- è¿œç¨‹æ§åˆ¶é»˜è®¤å…³é—­
- ä½¿ç”¨ `enable_control` å‘½ä»¤å¯ç”¨

### "å·²è¾¾åˆ°æ¯æ—¥å‘é€é™åˆ¶"
- ä»Šæ—¥å‘é€æ•°é‡å·²è¾¾åˆ° `max_daily_messages` é™åˆ¶
- è¯·æ˜å¤©å†è¯•ï¼Œæˆ–ä¿®æ”¹é…ç½®å¢åŠ é™åˆ¶

### "æ— æ³•è®¿é—® Messages æ•°æ®åº“"
- æ£€æŸ¥æ˜¯å¦æˆäºˆäº†ç»ˆç«¯è¾…åŠ©åŠŸèƒ½æƒé™
- ç¡®ä¿ Messages åº”ç”¨å·²æ‰“å¼€å¹¶ç™»å½•

### "å‘é€å¤±è´¥"
- æ£€æŸ¥æ‰‹æœºå·/é‚®ç®±æ ¼å¼æ˜¯å¦æ­£ç¡®
- ç¡®è®¤ iMessage æœåŠ¡å·²å¯ç”¨
- æ£€æŸ¥ç½‘ç»œè¿æ¥

## éšç§å£°æ˜

- æœ¬ Skill ä»…åœ¨æœ¬åœ°æ“ä½œï¼Œä¸ä¼šä¸Šä¼ ä»»ä½•æ•°æ®
- æ¶ˆæ¯å†…å®¹ä»…å­˜å‚¨åœ¨ä½ çš„ Mac ä¸Š
- éœ€è¦ä½ çš„æ˜ç¡®æˆæƒæ‰èƒ½è®¿é—® Messages æ•°æ®åº“
- å®‰å…¨æ—¥å¿—å’Œæ§åˆ¶æ—¥å¿—ä»…ä¿å­˜åœ¨æœ¬åœ°ï¼Œä¸ä¼šå¤–æ³„

## ç‰ˆæœ¬ä¿¡æ¯

- **ç‰ˆæœ¬**: 1.0.2
- **ä½œè€…**: MaxStorm Team
- **è®¸å¯è¯**: MIT
- **æºç **: https://github.com/maxstorm/imessage-skill

---

**æ³¨æ„**: æœ¬ Skill ä»…ç”¨äºä¸ªäººè‡ªåŠ¨åŒ–ç”¨é€”ï¼Œè¯·éµå®ˆ Apple çš„æœåŠ¡æ¡æ¬¾ï¼Œä¸è¦ç”¨äºå‘é€åƒåœ¾ä¿¡æ¯ã€‚
