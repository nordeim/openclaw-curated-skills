---
# Master playbook - orchestrates all roles
#
# Usage:
#   ansible-playbook -i inventory/hosts.yml playbooks/site.yml
#   ansible-playbook -i inventory/hosts.yml playbooks/site.yml --tags "security"
#   ansible-playbook -i inventory/hosts.yml playbooks/site.yml --limit production

- name: Base configuration for all servers
  hosts: all
  become: yes
  roles:
    - role: common
      tags: [common, base]
    - role: security
      tags: [security, hardening]

- name: OpenClaw servers
  hosts: openclaw
  become: yes
  roles:
    - role: nodejs
      tags: [nodejs, runtime]
    - role: openclaw
      tags: [openclaw, app]
