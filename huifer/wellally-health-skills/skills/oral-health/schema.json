{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://wellallyhealth.com/schemas/oral-health-tracker.json",
  "title": "OralHealthTracker",
  "description": "口腔健康追踪的数据结构定义",
  "type": "object",
  "properties": {
    "checkup_records": {
      "type": "array",
      "description": "口腔检查记录",
      "items": {
        "type": "object",
        "properties": {
          "id": { "type": "string" },
          "date": { "type": "string", "format": "date" },
          "teeth_status": {
            "type": "object",
            "additionalProperties": {
              "type": "object",
              "properties": {
                "condition": {
                  "type": "string",
                  "enum": ["normal", "caries", "missing", "filling", "crown", "bridge", "implant", "other"]
                },
                "note": { "type": "string" }
              }
            }
          },
          "periodontal_status": {
            "type": "object",
            "properties": {
              "bleeding_on_probing": { "type": "boolean" },
              "probing_depth": { "type": "string" },
              "gingival_recession": { "type": "string" },
              "classification": {
                "type": "string",
                "enum": ["healthy", "gingivitis", "mild_periodontitis", "moderate_periodontitis", "severe_periodontitis"]
              }
            }
          },
          "soft_tissue": { "type": "string" },
          "occlusion": { "type": "string" },
          "tmj": { "type": "string" },
          "examined_by": { "type": "string" },
          "notes": { "type": "string" }
        }
      }
    },
    "treatment_records": {
      "type": "array",
      "description": "治疗记录",
      "items": {
        "type": "object",
        "properties": {
          "id": { "type": "string" },
          "date": { "type": "string", "format": "date" },
          "tooth_number": {
            "type": "string",
            "pattern": "^[1-4][0-9]|[5-8][1-5]$"
          },
          "treatment_type": {
            "type": "string",
            "enum": ["filling", "root_canal", "extraction", "implant", "crown", "bridge", "denture", "orthodontic", "scaling", "periodontal", "other"]
          },
          "material": { "type": "string" },
          "cost": { "type": "number" },
          "anesthesia": { "type": "string" },
          "description": { "type": "string" },
          "notes": { "type": "string" }
        }
      }
    },
    "hygiene_habits": {
      "type": "object",
      "description": "卫生习惯",
      "properties": {
        "last_updated": { "type": "string", "format": "date" },
        "brushing": {
          "type": "object",
          "properties": {
            "frequency": {
              "type": "string",
              "enum": ["once_daily", "twice_daily", "more_than_twice", "irregular"]
            },
            "method": { "type": "string" },
            "duration_minutes": { "type": "number" },
            "toothbrush_type": { "type": "string" }
          }
        },
        "flossing": {
          "type": "object",
          "properties": {
            "frequency": {
              "type": "string",
              "enum": ["rarely", "weekly", "few_times_week", "daily"]
            },
            "time": { "type": "string", "enum": ["morning", "evening", "both"] }
          }
        },
        "mouthwash": {
          "type": "object",
          "properties": {
            "frequency": {
              "type": "string",
              "enum": ["rarely", "weekly", "few_times_week", "daily"]
            },
            "type": { "type": "string" }
          }
        },
        "tongue_cleaning": { "type": "boolean" },
        "interdental_brush": { "type": "boolean" }
      }
    },
    "oral_issues": {
      "type": "array",
      "description": "口腔问题记录",
      "items": {
        "type": "object",
        "properties": {
          "id": { "type": "string" },
          "date": { "type": "string", "format": "date" },
          "issue_type": {
            "type": "string",
            "enum": ["toothache", "bleeding", "ulcer", "sensitivity", "swelling", "bad_breath", "dry_mouth", "clicking", "other"]
          },
          "tooth_number": { "type": "string" },
          "severity": {
            "type": "string",
            "enum": ["mild", "moderate", "severe"]
          },
          "duration": { "type": "string" },
          "description": { "type": "string" },
          "resolved": { "type": "boolean" }
        }
      }
    },
    "screening_records": {
      "type": "object",
      "description": "疾病筛查记录",
      "properties": {
        "caries_risk": {
          "type": "object",
          "properties": {
            "last_assessed": { "type": "string", "format": "date" },
            "risk_level": {
              "type": "string",
              "enum": ["low", "moderate", "high"]
            }
          }
        },
        "periodontal_risk": {
          "type": "object",
          "properties": {
            "last_assessed": { "type": "string", "format": "date" },
            "risk_level": {
              "type": "string",
              "enum": ["low", "moderate", "high"]
            }
          }
        },
        "oral_cancer": {
          "type": "object",
          "properties": {
            "last_screened": { "type": "string", "format": "date" },
            "result": {
              "type": "string",
              "enum": ["normal", "abnormal"]
            }
          }
        }
      }
    },
    "checkup_reminders": {
      "type": "object",
      "properties": {
        "next_checkup": { "type": "string", "format": "date" },
        "next_cleaning": { "type": "string", "format": "date" }
      }
    },
    "oral_health_score": {
      "type": "number",
      "minimum": 0,
      "maximum": 10,
      "description": "口腔健康评分"
    }
  }
}
